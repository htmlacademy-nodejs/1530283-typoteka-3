extends ../layout.pug

block content
  main.articles-category
    h1 Бизнес
    section.articles-category__theme-list
      h2.visually-hidden Список тем
      ul.themes
        each category, index in categories
          - const href = `/articles/category/${index}`
          - const isActive = index === 0
          li.themes__item
            a.themes__item-link(class={[`themes__item-link--active`]: isActive} href=href)
              = category
              sup  #{index + 1}
    section.articles-category__list.preview
      h2.visually-hidden Список превью статей
      ul.preview__list
        each article in articles
          li.preview__item(class={[`preview__item--noimage`]: !article.image})
            ul.preview__breadcrumbs(style=`flex-wrap:wrap`)
              each category in article.categories
                li.preview__breadcrumbs-item
                  a.preview__breadcrumbs-link(href='#')= category
            if article.image
              .preview__background
                img.preview__background-image(src='/img/skyscraper@1x.jpg' width='460' height='240' srcset='/img/skyscraper@1x.jpg, img/skyscraper@2x.jpg 2x' alt='Фотография небоскреба')
            time.preview__time(datetime=article.createdCEODate)= article.createdDate
            h3.preview__name
              a.preview__name-link(href=`/articles/${article.id}`)= article.title
            p.preview__text= article.announce
            a.preview__comment(href=`/articles/${article.id}#comments`)
              | Комментарии
              span.preview__cloud
              |
              b.preview__comment-count  #{article.comments.length}
